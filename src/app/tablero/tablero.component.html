<div class="actions-container">
  <button class="share-button" (click)="captureAndShareBoard()" title="Compartir por WhatsApp">
    <i class="share-icon">ðŸ”—</i><i class="whatsapp-icon">ðŸ“±</i>
  </button>
</div>

<div class="board-container" #boardRef>
  <h1 class="board-title">{{ title }}</h1>
  
  <div class="status-legend">
    <div class="legend-item">
      <span class="legend-dot status-available-dot"></span>
      <span>Disponible</span>
    </div>
    <div class="legend-item">
      <span class="legend-dot status-busy-dot"></span>
      <span>Ocupado</span>
    </div>
    <div class="legend-item">
      <span class="legend-dot status-on-leave-dot"></span>
      <span>Ausente</span>
    </div>
  </div>
  
  <div class="columns-container">
    @for (column of getColumns(); track column.id) {
      <div class="day-column">
        <div class="day-header">{{ column.title }}</div>
        
        <div class="column-content" 
             (dragover)="onDragOver($event)" 
             (drop)="onDrop($event, column.id)">
          @for (item of column.items; track item.id; let i = $index) {
            <div class="card-slot">
              <div class="employee-card" 
                   draggable="true"
                   (dragstart)="onDragStart($event, item.id, column.id, i)"
                   (dragend)="onDragEnd($event)"
                   [ngClass]="'status-' + item.status">
                <img [src]="item.image" class="avatar" alt="{{ item.name }}" />
                <span class="employee-name">{{ item.name }}</span>
                <span class="status-indicator" [title]="item.status">
                  <span class="status-dot"></span>
                </span>
              </div>
            </div>
          }
          
          <!-- Espacio vacÃ­o para permitir soltar elementos cuando la columna estÃ¡ vacÃ­a -->
          @if (column.items.length === 0) {
            <div class="empty-column-placeholder">
              <div class="empty-placeholder-content">
                Arrastra empleados aquÃ­
              </div>
            </div>
          }
          
          <!-- Slots adicionales para permitir mÃ¡s elementos -->
          @for (i of [column.items.length]; track i) {
            <div class="card-slot empty-slot">
              <!-- Slot vacÃ­o para permitir soltar elementos al final de la columna -->
            </div>
          }
        </div>
      </div>
    }
  </div>
</div>

<!-- Mensaje de Ãºltima operaciÃ³n (opcional, para depuraciÃ³n) -->
@if (boardState.lastOperation) {
  <div class="operation-info">
    <p>Ãšltima operaciÃ³n: {{ boardState.lastOperation.outcome.type }}</p>
  </div>
}
