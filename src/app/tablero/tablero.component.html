<div class="floating-buttons">
  <button class="share-button" (click)="captureAndShareBoard()" title="Compartir por WhatsApp">
    <img src="assets/images/whatsapp.png" alt="WhatsApp" />
  </button>
  <button class="theme-toggle-button" (click)="toggleTheme()" title="Cambiar tema">
    <span *ngIf="isDarkMode; else lightMode">üåô</span>
    <ng-template #lightMode>‚òÄÔ∏è</ng-template>
  </button>
</div>

<div class="board-container" #boardRef>
  <img src="assets/images/favicon.png" width="90" height="90" alt="Logo" />
  <h1 class="board-title">{{ title }}</h1>
  
  <div class="status-legend">
    <div class="legend-item">
      <span class="legend-dot status-available-dot"></span>
      <span>Disponible</span>
    </div>
    <div class="legend-item">
      <span class="legend-dot status-busy-dot"></span>
      <span>Ocupado</span>
    </div>
    <div class="legend-item">
      <span class="legend-dot status-on-leave-dot"></span>
      <span>Ausente</span>
    </div>
  </div>
  
  <div class="columns-container">
    @for (column of getColumns(); track column.id) {
      <div class="day-column">
        <div class="day-header">{{ column.title }}</div>
        
        <div class="column-content" 
             (dragover)="onDragOver($event)" 
             (drop)="onDrop($event, column.id)">
          @for (item of column.items; track item.id; let i = $index) {
            <div class="card-slot">
              <div class="employee-card" 
                   draggable="true"
                   (dragstart)="onDragStart($event, item.id, column.id, i)"
                   (dragend)="onDragEnd($event)"
                   [ngClass]="'status-' + item.status">
                <img [src]="item.image" class="avatar" alt="{{ item.name }}" />
                <span class="employee-name">{{ item.name }}</span>
                <span class="status-indicator" [title]="item.status">
                  <span class="status-dot"></span>
                </span>
              </div>
            </div>
          }
          
          <!-- Espacio vac√≠o para permitir soltar elementos cuando la columna est√° vac√≠a -->
          @if (column.items.length === 0) {
            <div class="empty-column-placeholder">
              <div class="empty-placeholder-content">
                Arrastra colaboradores aqu√≠
              </div>
            </div>
          }
          
          <!-- Slots adicionales para permitir m√°s elementos -->
          @for (i of [column.items.length]; track i) {
            <div class="card-slot empty-slot">
              <!-- Slot vac√≠o para permitir soltar elementos al final de la columna -->
            </div>
          }
        </div>
      </div>
    }
  </div>
</div>

<!-- Mensaje de √∫ltima operaci√≥n (opcional, para depuraci√≥n) -->
@if (boardState.lastOperation) {
  <div class="operation-info">
    <p>√öltima operaci√≥n: {{ boardState.lastOperation.outcome.type }}</p>
  </div>
}
